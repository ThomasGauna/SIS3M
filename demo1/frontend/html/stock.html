<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stock</title>
  <link rel="stylesheet" href="../css/app.css"/>
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <div class="brand">
        <a href="./index.html" class="brand-home" aria-label="Ir al inicio">SIS3M</a>
        <button id="collapseAll" class="btn" style="padding:.3rem .5rem; font-size:.8rem">Colapsar</button>
      </div>

      <nav class="menu" id="menu">
        <!-- Trabajos (top) -->
        <button class="menu-group" data-group="trabajos" aria-expanded="true">
          <span>Trabajos <span id="badgeTrabajos" class="badge" style="margin-left:.5rem; display:none">—</span></span>
          <span class="caret">▾</span>
        </button>
        <div class="submenu open" data-for="trabajos">
          <a href="./trabajos_list.html">Historial</a>
          <a href="./trabajos_show.html">Nuevo trabajo</a>
        </div>

        <!-- Clientes -->
        <button class="menu-group" data-group="clientes">
          <span>Clientes</span><span class="caret">▾</span>
        </button>
        <div class="submenu" data-for="clientes">
          <a href="./clientes.html">Clientes</a>
        </div>

        <!-- Productos -->
        <button class="menu-group" data-group="productos">
          <span>Productos</span><span class="caret">▾</span>
        </button>
        <div class="submenu" data-for="productos">
          <a href="./productos.html">Productos</a>
          <a href="./categorias.html">Categorías</a>
          <a href="./marcas.html">Marcas</a>
          <a href="./proveedores.html">Proveedores</a>
          <a href="./ubicaciones.html">Ubicaciones</a>
        </div>

        <!-- Stock -->
        <button class="menu-group" data-group="stock">
          <span>Stock</span><span class="caret">▾</span>
        </button>
        <div class="submenu" data-for="stock">
          <a href="./stock.html">Movimientos de stock</a>
        </div>

        <!-- Vehículos -->
        <button class="menu-group" data-group="vehiculos">
          <span>Vehículos</span><span class="caret">▾</span>
        </button>
        <div class="submenu" data-for="vehiculos">
          <a href="./vehiculos.html">Gestión de vehículos</a>
          <a href="./vehiculo_usos.html">Movimientos</a>
        </div>

        <!-- Usuarios -->
        <button class="menu-group" data-group="usuarios">
          <span>Usuarios</span><span class="caret">▾</span>
        </button>
        <div class="submenu" data-for="usuarios">
          <a href="./usuarios.html">Gestión de usuarios</a>
        </div>
      </nav>
    </aside>

    <main class="content">
      <h1>Stock</h1>

      <section>
        <form id="formMov">
          <fieldset>
            <legend>Entrada / Salida</legend>

            <div class="row">
              <div class="col">
                <label for="tipo">Tipo</label>
                <select id="tipo" name="tipo">
                  <option value="entrada">entrada</option>
                  <option value="salida">salida</option>
                </select>
              </div>

              <div class="col">
                <label for="producto_id">Producto</label>
                <select id="producto_id" name="producto_id" required>
                  <option value="">-- Selecciona un producto --</option>
                </select>
              </div>

              <div class="col">
                <label for="cantidad">Cantidad</label>
                <input id="cantidad" name="cantidad" type="number" step="0.01" required/>
              </div>

              <div class="col" id="grpOrigen">
                <label for="ubic_origen_id">Ubic. Origen</label>
                <select id="ubic_origen_id" name="ubic_origen_id">
                  <option value="">-- Origen --</option>
                </select>
              </div>

              <div class="col" id="grpDestino">
                <label for="ubic_destino_id">Ubic. Destino</label>
                <select id="ubic_destino_id" name="ubic_destino_id">
                  <option value="">-- Destino --</option>
                </select>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <label for="origen">Origen (motivo)</label>
                <select id="origen" name="origen">
                  <option value="manual">Manual</option>
                  <option value="compra">Compra</option>
                  <option value="venta">Venta</option>
                  <option value="ajuste">Ajuste</option>
                  <option value="ticket">Ticket</option>
                  <option value="inventario">Inventario</option>
                </select>
              </div>

              <div class="col">
                <label for="ref_tipo">Ref Tipo</label>
                <select id="ref_tipo" name="ref_tipo">
                  <option value="">-- (opcional) --</option>
                  <option value="OC">Orden de Compra</option>
                  <option value="FACT">Factura</option>
                  <option value="TICKET">Ticket</option>
                  <option value="AJUSTE">Ajuste</option>
                  <option value="INV">Inventario</option>
                </select>
              </div>

              <div class="col">
                <label for="ref_id">Ref ID</label>
                <input id="ref_id" name="ref_id" type="number" placeholder="(opcional)"/>
              </div>

              <div class="col">
                <label for="notas">Notas</label>
                <input id="notas" name="notas" type="text" placeholder="(opcional)"/>
              </div>
            </div>
          </fieldset>

          <div class="row" style="align-items:end">
            <div class="col">
              <button type="submit" class="btn">Registrar</button>
            </div>
          </div>
        </form>
      </section>

      <section>
        <form id="formTrans">
          <fieldset>
            <legend>Transferir</legend>
            <div class="row">
              <div class="col">
                <label for="t_producto_id">Producto</label>
                <select id="t_producto_id" required>
                  <option value="">-- Selecciona un producto --</option>
                </select>
              </div>
              <div class="col">
                <label for="t_cantidad">Cantidad</label>
                <input id="t_cantidad" type="number" step="0.01" required/>
              </div>
              <div class="col">
                <label for="t_origen">Desde</label>
                <select id="t_origen" required>
                  <option value="">-- Origen --</option>
                </select>
              </div>
              <div class="col">
                <label for="t_destino">Hacia</label>
                <select id="t_destino" required>
                  <option value="">-- Destino --</option>
                </select>
              </div>
            </div>
          </fieldset>

          <div class="row" style="align-items:end">
            <div class="col">
              <button type="submit" class="btn">Transferir</button>
            </div>
          </div>
        </form>
      </section>

      <section>
        <fieldset>
          <legend>Movimientos (Kardex)</legend>

          <div class="row">
            <div class="col">
              <label for="k_prod">Producto</label>
              <select id="k_prod">
                <option value="">-- Todos --</option>
              </select>
            </div>
            <div class="col">
              <label for="k_q">Buscar</label>
              <input id="k_q" type="text" placeholder="por origen / ref / notas..."/>
            </div>
            <div class="col" style="align-self:end">
              <button id="k_go" class="btn" type="button">Buscar</button>
            </div>
          </div>

          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>ID</th><th>Fecha</th><th>Producto</th><th>Tipo</th>
                  <th>Cant</th><th>Origen</th><th>Ref</th><th>Notas</th>
                </tr>
              </thead>
              <tbody id="tbK"></tbody>
            </table>
          </div>
        </fieldset>
      </section>

      <section>
        <fieldset>
          <legend>Inventario</legend>

          <form id="formInvOpen" class="row">
            <div class="col">
              <label for="inv_titulo">Título</label>
              <input id="inv_titulo" type="text" placeholder="Título inventario" required/>
            </div>
            <div class="col">
              <label for="inv_ubi">Ubicación</label>
              <select id="inv_ubi">
                <option value="">-- (opcional) --</option>
              </select>
            </div>
            <div class="col" style="align-self:end">
              <button type="submit" class="btn">Abrir inventario</button>
            </div>
          </form>

          <div class="row">
            <div class="col">
              <label for="inv_id">Inventario ID</label>
              <input id="inv_id" type="number" placeholder="Inventario ID"/>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <label for="inv_items">Items</label>
              <textarea id="inv_items" rows="6" placeholder='[{"producto_id":1,"conteo":10},{"producto_id":2,"conteo":5}]'></textarea>
            </div>
          </div>

          <div class="row" style="align-items:end">
            <div class="col">
              <button id="inv_close" class="btn " type="button">Cerrar inventario</button>
            </div>
          </div>
        </fieldset>
      </section>

      <div id="msg" class="muted"></div>

      <script src="../js/stock.js"></script>
      <script src="../js/sidebar.js"></script>

    </main>
  </div>

</body>
</html>
